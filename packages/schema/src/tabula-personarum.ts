import { z } from "zod";

/**\n * Schema for a single persona entry in the tabula personarum.\n * \n * The tabula personarum (\"table of persons\") is the rogue's gallery or index\n * that catalogs all the masks a person wears. Each entry describes one theatrical\n * persona with its full theatrical and functional metadata.\n * \n * Properties:\n * - `id`: Unique identifier for this persona\n * - `nomen`: Latin theatrical name (e.g., \"Vir Architectus\" = \"The Architect\")\n * - `everyday_name`: Common name used in everyday contexts (e.g., \"The Technical Lead\")\n * - `role_vector`: What this mask does and its functional purpose\n * - `tone_register`: How this mask speaks and its tonal/rhetorical register\n * - `visibility_scope`: Which scaenae (theatrical stages) this mask operates in\n * - `motto`: Latin epigraph or guiding principle\n * - `description`: Longer narrative description of this persona\n * - `active`: Whether this persona is currently active\n * - `created_at`: When this persona was defined\n * - `updated_at`: When this persona was last modified\n * \n * @example\n * const persona = TabulaPersonarumEntrySchema.parse({\n *   id: \"persona-architect-001\",\n *   nomen: \"Vir Architectus\",\n *   everyday_name: \"The Technical Architect\",\n *   role_vector: \"Design complex systems, define technical strategy, mentor architects\",\n *   tone_register: \"Authoritative, structural, long-term strategic perspective\",\n *   visibility_scope: [\"Technica\", \"Civica\"],\n *   motto: \"Soliditas in fundamento\",  // Latin: \"Strength in foundation\"\n *   description: \"This persona represents deep technical authority...\",\n *   active: true,\n *   created_at: \"2024-01-01T00:00:00Z\",\n *   updated_at: \"2024-01-15T10:30:00Z\"\n * });\n */\nexport const TabulaPersonarumEntrySchema = z.object({\n  id: z.string().describe(\"Unique identifier for this persona\"),\n  nomen: z.string().describe(\"Latin theatrical name of this persona\"),\n  everyday_name: z.string().describe(\"Common/everyday name for this persona\"),\n  role_vector: z.string().describe(\"What this mask does and enables\"),\n  tone_register: z.string().describe(\"How this mask speaks and its rhetorical register\"),\n  visibility_scope: z.array(z.string()).describe(\"Scaenae where this mask is appropriate and visible\"),\n  motto: z.string().optional().describe(\"Latin epigraph or guiding principle\"),\n  description: z.string().optional().describe(\"Longer narrative description of this persona\"),\n  active: z.boolean().default(true).describe(\"Whether this persona is currently active\"),\n  created_at: z.string().datetime().describe(\"When this persona was defined\"),\n  updated_at: z.string().datetime().describe(\"When this persona was last modified\")\n});\n\n/**\n * Type representation of a single persona entry.\n * Used when working with individual personas in the mask index.\n */\nexport type TabulaPersonarumEntry = z.infer<typeof TabulaPersonarumEntrySchema>;\n\n/**\n * Schema for a single resonance entry.\n * \n * Resonance tracks how well this persona aligns with external opportunities,\n * audiences, or contexts. It's used by the Inverted Interview and job matching\n * systems to determine which masks are most appropriate.\n * \n * Properties:\n * - `persona_id`: Which persona this resonance relates to\n * - `context`: What context/opportunity this resonance is measured for\n * - `fit_score`: How well this persona fits (0-100)\n * - `alignment_keywords`: Keywords that activate this persona\n * - `misalignment_keywords`: Keywords that deactivate this persona\n * - `last_used`: When this persona was last activated\n * - `success_count`: How many successful matches with this persona\n * - `feedback`: User feedback on how well this persona performs\n */\nexport const PersonaResonanceSchema = z.object({\n  persona_id: z.string().describe(\"ID of the persona this resonance relates to\"),\n  context: z.string().describe(\"Context/opportunity this resonance is measured for\"),\n  fit_score: z.number().int().min(0).max(100).describe(\"Fit score (0-100)\"),\n  alignment_keywords: z.array(z.string()).optional().describe(\"Keywords that activate this persona\"),\n  misalignment_keywords: z.array(z.string()).optional().describe(\"Keywords that deactivate this persona\"),\n  last_used: z.string().datetime().optional().describe(\"When this persona was last activated\"),\n  success_count: z.number().int().min(0).optional().describe(\"Number of successful matches\"),\n  feedback: z.string().optional().describe(\"User feedback on persona performance\")\n});\n\n/**\n * Type representation of persona resonance data.\n * Used for tracking and optimizing persona performance.\n */\nexport type PersonaResonance = z.infer<typeof PersonaResonanceSchema>;\n\n/**\n * Schema for the complete tabula personarum (table of persons).\n * \n * This is the master directory/index of all theatrical personas a person assumes.\n * It serves as the rogue's gallery that documents the dramatis personae of\n * a complete human.\n * \n * Properties:\n * - `id`: Unique identifier (typically the profile ID)\n * - `personas`: Array of all active personas\n * - `persona_count`: Number of defined personas\n * - `current_primary`: ID of the currently primary/active persona\n * - `resonances`: Historical resonance data for optimization\n * - `created_at`: When this index was created\n * - `updated_at`: When this index was last updated\n * - `metadata`: Additional metadata about the persona index\n * \n * @example\n * const index = TabulaPersonarumSchema.parse({\n *   id: \"profile-123\",\n *   personas: [\n *     {\n *       id: \"persona-architect-001\",\n *       nomen: \"Vir Architectus\",\n *       everyday_name: \"The Architect\",\n *       role_vector: \"Design systems, mentor engineers...\"\n *     },\n *     {\n *       id: \"persona-researcher-001\",\n *       nomen: \"Vir Investigationis\",\n *       everyday_name: \"The Researcher\",\n *       role_vector: \"Conduct original research, publish...\"\n *     }\n *   ],\n *   persona_count: 2,\n *   current_primary: \"persona-architect-001\",\n *   created_at: \"2024-01-01T00:00:00Z\",\n *   updated_at: \"2024-12-31T23:59:59Z\"\n * });\n */\nexport const TabulaPersonarumSchema = z.object({\n  id: z.string().describe(\"Profile ID this index belongs to\"),\n  personas: z.array(TabulaPersonarumEntrySchema).describe(\"All defined personas\"),\n  persona_count: z.number().int().min(0).describe(\"Total number of personas\"),\n  current_primary: z.string().optional().describe(\"ID of currently primary persona\"),\n  resonances: z.array(PersonaResonanceSchema).optional().describe(\"Historical resonance data\"),\n  created_at: z.string().datetime().describe(\"When this index was created\"),\n  updated_at: z.string().datetime().describe(\"When this index was last modified\"),\n  metadata: z.object({\n    last_resonance_update: z.string().datetime().optional(),\n    most_used_persona: z.string().optional(),\n    total_persona_activations: z.number().int().min(0).optional()\n  }).optional()\n});\n\n/**\n * Type representation of the complete tabula personarum.\n * The master directory of all theatrical personas.\n */\nexport type TabulaPersonarum = z.infer<typeof TabulaPersonarumSchema>;\n"